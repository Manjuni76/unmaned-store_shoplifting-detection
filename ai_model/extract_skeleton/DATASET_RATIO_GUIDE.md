# 데이터셋 비율 조정 가이드

## 개요
`dataset_processor.py`가 수정되어 다음과 같은 비율로 데이터셋을 생성합니다:

## 설정된 비율
- **정상:이상 비율**: 7:3 (기본값) 또는 6:4 (선택가능)
- **Train:Test 비율**: 4:1
- **정상 데이터**: 모든 카테고리별 데이터 사용

## 현재 데이터셋 분포 (기존)
- 정상:이상 = 51.3:1 (98.1%:1.9%) - 매우 불균형
- Train:Test = 3.1:1

## 새로운 데이터셋 분포 (개선 후)
### 7:3 비율 (기본)
- 정상:이상 = 2.3:1 (70%:30%)
- Train:Test = 4:1

### 6:4 비율 (옵션)
- 정상:이상 = 1.5:1 (60%:40%) 
- Train:Test = 4:1

## 사용 방법

### 1. 기본 설정 (7:3 비율)
```python
python dataset_processor.py
```

### 2. 6:4 비율로 변경
`dataset_processor.py`의 `main()` 함수에서 다음 줄의 주석을 해제:
```python
processor.normal_abnormal_ratio = 0.6  # 6:4 비율로 변경하려면 주석 해제
```

### 3. 커스텀 비율 설정
```python
# 다른 비율 예시
processor.normal_abnormal_ratio = 0.8  # 8:2 비율
processor.train_test_ratio = 3          # Train:Test = 3:1 비율
```

## 주요 변경사항

### 1. 데이터 분할 방식 개선
- **기존**: 정상 데이터만 훈련에 사용, 이상 데이터는 모두 테스트에만 사용
- **새로운**: 정상/이상 데이터를 모두 훈련과 테스트에 적절히 분배

### 2. 비율 최적화 알고리즘
- 이상 데이터 개수를 기준으로 전체 데이터셋 크기 결정
- 정상 데이터는 카테고리별로 모든 데이터 활용 (가능한 경우)
- 요청된 비율에 맞춰 자동 분할

### 3. 유연한 비율 설정
- 정상:이상 비율 쉽게 변경 가능
- Train:Test 비율 조정 가능
- 실시간 비율 확인 기능

## 출력 예시
```
설정된 비율:
  - 정상:이상 = 70.0%:30.0%
  - Train:Test = 4:1

=== 비율 최적화 계산 중 ===
목표 정상:이상 비율 = 70.0%:30.0%

최종 데이터 분할 결과:
Train 데이터: 426개 (정상: 298, 이상: 128)
Test 데이터: 107개 (정상: 75, 이상: 32)
Train:Test 비율 = 4.0:1

데이터셋 생성 완료!
훈련 데이터: 8520명, 1,234,567프레임 (정상: 70.0%, 이상: 30.0%)
테스트 데이터: 2,130명, 308,642프레임 (정상: 70.0%, 이상: 30.0%)

전체 데이터셋 비율:
  - 정상:이상 = 2.3:1 (70.0%:30.0%)
  - Train:Test = 4.0:1
```

## 주의사항
1. 정상 데이터가 부족한 경우 모든 정상 데이터를 사용하고 실제 비율을 표시합니다.
2. Windows 환경 호환성을 위해 이모지가 제거되었습니다.
3. 기존 `dataset_output/` 폴더의 데이터는 새로 생성된 데이터로 대체됩니다.